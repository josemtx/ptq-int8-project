\documentclass[11pt,a4paper]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage{amsmath, amssymb, amsfonts}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage[hidelinks]{hyperref}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,spanish]{babel}
\usepackage{float}            % permite [H] = aquí mismo
\usepackage[section]{placeins} % no deja que los flotantes se salgan de su sección
\AtBeginDocument{\selectlanguage{spanish}}

% ---- Que cada \section empiece en página nueva (sin romper la primera) ----
\usepackage{etoolbox}
\newbool{firstsection}
\setbool{firstsection}{true}
\pretocmd{\section}{%
  \ifbool{firstsection}{\global\setbool{firstsection}{false}}{\clearpage}%
}{}{}

% ---- Bibliografía con biblatex (biber) ----
\usepackage[backend=biber,style=authoryear,sorting=nyt,language=spanish]{biblatex}
\addbibresource{refs.bib}

% Alias de nombres (Apellido, Nombre)
\DeclareNameAlias{author}{family-given}

% Formatos básicos
\DeclareFieldFormat[article]{journaltitle}{#1}
\DeclareFieldFormat[inproceedings]{booktitle}{#1}
\DeclareFieldFormat{title}{#1}
\DeclareFieldFormat{pages}{#1}

% Separadores
\newcommand{\bibsepcomma}{, }
\newcommand{\parenopen}{(}
\newcommand{\parenclose}{)}

% Driver para ARTICLE
\DeclareBibliographyDriver{article}{%
  \printtext{\parenopen}%
  \printnames{author}\bibsepcomma
  \printfield[title]{title}\bibsepcomma
  \printfield[journaltitle]{journaltitle}%
  \iffieldundef{volume}{}{\bibsepcomma \printfield{volume}}%
  \iffieldundef{pages}{}{\bibsepcomma \printfield{pages}}%
  \iffieldundef{year}{}{\bibsepcomma \printfield{year}}%
  \printtext{\parenclose}%
  \finentry
}

% Driver para INPROCEEDINGS
\DeclareBibliographyDriver{inproceedings}{%
  \printtext{\parenopen}%
  \printnames{author}\bibsepcomma
  \printfield[title]{title}\bibsepcomma
  \printfield[booktitle]{booktitle}%
  \iffieldundef{volume}{}{\bibsepcomma \printfield{volume}}%
  \iffieldundef{pages}{}{\bibsepcomma \printfield{pages}}%
  \iffieldundef{year}{}{\bibsepcomma \printfield{year}}%
  \printtext{\parenclose}%
  \finentry
}

% Driver para MISC/ONLINE/ARXIV (usa howpublished o url si no hay venue)
\DeclareBibliographyDriver{misc}{%
  \printtext{\parenopen}%
  \printnames{author}\bibsepcomma
  \printfield[title]{title}\bibsepcomma
  \iffieldundef{howpublished}
    {\iffieldundef{url}{}{\printfield{url}}}
    {\printfield{howpublished}}%
  \iffieldundef{volume}{}{\bibsepcomma \printfield{volume}}%
  \iffieldundef{pages}{}{\bibsepcomma \printfield{pages}}%
  \iffieldundef{year}{}{\bibsepcomma \printfield{year}}%
  \printtext{\parenclose}%
  \finentry
}
\DeclareBibliographyAlias{online}{misc}
\DeclareBibliographyAlias{report}{misc}
\DeclareBibliographyAlias{unpublished}{misc}

% Pequeños ajustes lingüísticos
\DefineBibliographyStrings{spanish}{andothers={et al.}}


\title{Cuantización Post-Entrenamiento a INT8 con Ejecución Simulada en NumPy}
\author{Jose Mataix}
\date{\today}

\graphicspath{{../results/figuras/}}

\begin{document}
\maketitle

\begin{abstract}
\input{resumen.tex}
\end{abstract}

\tableofcontents

% Mantener juntas las listas (anula \clearpage temporalmente)
\begingroup
  \let\origclearpage\clearpage
  \let\clearpage\relax
  \listoffigures
  \listoftables
  \let\clearpage\origclearpage
\endgroup

\section{Introducción}
\input{intro.tex}

\section{Métodos y Conjuntos de Datos}
\input{metodos_datos.tex}

\section{Implementación (Pseudocódigo)}
\input{implementacion.tex}

\section{Experimentos y Resultados}
\input{experimentos.tex}

\section{Conclusiones y Trabajo Futuro}
\input{conclusiones.tex}

\printbibliography[title={Referencias}]
\end{document}
